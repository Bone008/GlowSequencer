<Window x:Class="GlowSequencer.View.TransferWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:GlowSequencer.ViewModel"
        Title="Transfer to equipment" Width="600" SizeToContent="Height"
        Closing="Window_Closing">
    <!--<Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="320.8"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>-->

    <StackPanel Orientation="Vertical" Margin="10">
        <Label Padding="0,5">Path to Aerotech Glo-Ultimate App:</Label>
        <DockPanel IsEnabled="{Binding IsTransferIdle}">
            <Button TabIndex="1" DockPanel.Dock="Right" Content="Browse ..." Padding="10,0" Margin="5,0" />
            <TextBox TabIndex="0" Text="{Binding AerotechAppExePath}" />
        </DockPanel>

        <TextBlock TextWrapping="Wrap" Margin="0,10">
            <Run>The necessary *.glo files will be automatically generated into a subdirectory of the Aerotech program.</Run>
            <LineBreak />
            <Run>Make sure that you have write access to above directory.</Run>
        </TextBlock>

        <Grid>
            <Label Padding="0,5">Transferred tracks:</Label>
            <Button IsEnabled="{Binding IsTransferIdle}" Click="SelectAll_Click" HorizontalAlignment="Right" Padding="20,0" Margin="0,3">All</Button>
        </Grid>
        <ListBox x:Name="transferredTracks" SelectionMode="Extended"
                 MaxHeight="150"
                 ItemsSource="{Binding AllTracks}" IsEnabled="{Binding IsTransferIdle}"
                 SelectionChanged="transferredTracks_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate DataType="{x:Type vm:TrackViewModel}">
                    <TextBlock Text="{Binding Label}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>


        <Expander Header="Advanced settings" Margin="0,10" BorderBrush="#FFABADB3" BorderThickness="1" Padding="5"
                  IsEnabled="{Binding IsTransferIdle}">
            <StackPanel Orientation="Vertical">
                <StackPanel Style="{StaticResource s_FormRow}" ToolTip="How long to wait for Glo-Ultimate to recognize all clubs after startup.">
                    <Label Style="{StaticResource s_FormLabelWide}" Content="Delay after program start:" />
                    <TextBox Width="50" HorizontalContentAlignment="Right" />
                    <Label>ms</Label>
                </StackPanel>
                <StackPanel Style="{StaticResource s_FormRow}" ToolTip="How long to wait for an upload to complete before continuing.">
                    <Label Style="{StaticResource s_FormLabelWide}" Content="Delay for uploads:" />
                    <TextBox Width="50" HorizontalContentAlignment="Right" />
                    <Label>ms</Label>
                </StackPanel>
                <StackPanel Style="{StaticResource s_FormRow}" ToolTip="How long to wait between each simulated key press.">
                    <Label Style="{StaticResource s_FormLabelWide}" Content="Delay between key presses:" />
                    <TextBox Width="50" HorizontalContentAlignment="Right" />
                    <Label>ms</Label>
                </StackPanel>
            </StackPanel>
        </Expander>

        <TextBlock HorizontalAlignment="Right" TextAlignment="Right">
            <Run>All equipment has to be connected to the computer before starting the transfer.</Run>
            <LineBreak />
            <Run>Please do not press any buttons while the Aerotech software is running.</Run>
        </TextBlock>

        <CheckBox Margin="0,5" Content="Start sequence automatically after transfer."
                  IsChecked="{Binding CloseProgramAfterTransfer}" IsEnabled="{Binding IsTransferIdle}" />
        <CheckBox Margin="0,5" Content="Close Glo-Ultimate App after transfer."
                  IsChecked="{Binding StartAutomagicallyAfterTransfer}" IsEnabled="{Binding IsTransferIdle}" />

        <Button Width="100" Height="30" HorizontalAlignment="Right" Margin="0,10"
                    Content="Cancel" Click="Cancel_Click"
                    Visibility="{Binding IsTransferInProgress, Converter={StaticResource conv_BoolToVisibility}}" />
        <Button Width="100" Height="30" HorizontalAlignment="Right" Margin="0,10"
                    Content="Start" Click="Start_Click"
                    Visibility="{Binding IsTransferIdle, Converter={StaticResource conv_BoolToVisibility}}"
                    IsEnabled="{Binding CanStartTransfer}" />


        <ProgressBar Height="25" Value="{Binding TransferProgress}" Maximum="100" />

        <Label>Log:</Label>
        <TextBox IsReadOnly="True" Height="100" Text="{Binding LogOutput, Mode=OneWay}" VerticalContentAlignment="Top"
                 HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible" TextChanged="TextBox_TextChanged" />
    </StackPanel>

    <!--<StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Right" Margin="0,10.2,-0.4,10.4">
            <Button Content="Cancel" Padding="20,0" />
            <Button Content="Start" Margin="10,0" Padding="20,0" />
        </StackPanel>-->

    <!--</Grid>-->
</Window>
